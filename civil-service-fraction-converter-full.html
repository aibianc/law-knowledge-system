<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>考公百化分公式转换工具（完整版）</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
        }
        
        body {
            background-color: #f0f5ff;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #1a6dcc 0%, #0d4d9c 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(13, 77, 156, 0.2);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .main-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1100px) {
            .main-container {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background-color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
        }
        
        .panel-title {
            color: #1a6dcc;
            font-size: 1.4rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e6f0ff;
            display: flex;
            align-items: center;
        }
        
        .panel-title i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .converter {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .converter-row {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .input-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input, select {
            width: 100%;
            padding: 14px 15px;
            border: 2px solid #d9e6ff;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #1a6dcc;
        }
        
        .convert-btn {
            background: linear-gradient(to right, #1a6dcc, #0d4d9c);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
            align-self: flex-start;
        }
        
        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(13, 77, 156, 0.3);
        }
        
        .result-box {
            background-color: #f0f7ff;
            padding: 20px;
            border-radius: 8px;
            border-left: 5px solid #1a6dcc;
            margin-top: 20px;
        }
        
        .result-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1a6dcc;
            margin: 10px 0;
        }
        
        .result-detail {
            color: #666;
            font-size: 0.95rem;
        }
        
        .tables-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 20px;
        }
        
        @media (max-width: 900px) {
            .tables-container {
                grid-template-columns: 1fr;
            }
        }
        
        .table-wrapper {
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            max-height: 600px;
            overflow-y: auto;
        }
        
        .table-title {
            color: #1a6dcc;
            font-size: 1.3rem;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #e6f0ff;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        th {
            background-color: #1a6dcc;
            color: white;
            padding: 12px 10px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid #e6f0ff;
        }
        
        tr:nth-child(even) {
            background-color: #f8fbff;
        }
        
        tr:hover {
            background-color: #e6f0ff;
        }
        
        .fraction {
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .percentage {
            color: #1a6dcc;
            font-weight: 600;
        }
        
        .memory-tip {
            background-color: #fff8e6;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 5px solid #ffb300;
        }
        
        .tip-title {
            color: #e65100;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .example {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .example-title {
            color: #555;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .example-content {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        
        .highlight {
            background-color: #e6f0ff;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .quick-conversions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .quick-item {
            background-color: #f8fbff;
            padding: 12px 8px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s;
            border: 1px solid #e6f0ff;
        }
        
        .quick-item:hover {
            background-color: #e6f0ff;
        }
        
        .quick-fraction {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .quick-percent {
            color: #1a6dcc;
            font-size: 0.85rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: #777;
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        
        @media (max-width: 600px) {
            .converter-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .quick-conversions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .panel {
                padding: 20px 15px;
            }
        }
        
        .important-note {
            background-color: #ffe6e6;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 5px solid #cc1a1a;
        }
        
        .note-title {
            color: #cc1a1a;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .formula-display {
            font-size: 1.3rem;
            text-align: center;
            margin: 15px 0;
            padding: 12px;
            background-color: #f8fbff;
            border-radius: 8px;
            border: 2px dashed #1a6dcc;
        }
        
        .section-divider {
            height: 2px;
            background: linear-gradient(to right, transparent, #1a6dcc, transparent);
            margin: 30px 0;
        }
        
        .category-title {
            color: #1a6dcc;
            font-size: 1.2rem;
            margin: 20px 0 15px 0;
            padding-left: 10px;
            border-left: 4px solid #1a6dcc;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <h1><i class="fas fa-calculator"></i> 考公百化分公式转换工具（完整版）</h1>
        <p class="subtitle">公务员考试资料分析必备工具 - 完整展示1/2到1/30百化分转换，掌握所有常用分数与百分数对应关系</p>
    </header>
    
    <div class="main-container">
        <div>
            <div class="panel">
                <h2 class="panel-title"><i class="fas fa-exchange-alt"></i> 百化分转换器</h2>
                <div class="converter">
                    <div class="converter-row">
                        <div class="input-group">
                            <label>输入百分数（如：12.5%）：</label>
                            <input type="text" id="percentInput" placeholder="输入百分数，如：12.5%">
                        </div>
                        <div class="input-group">
                            <label>或输入分数（如：1/8）：</label>
                            <input type="text" id="fractionInput" placeholder="输入分数，如：1/8">
                        </div>
                    </div>
                    
                    <div class="formula-display" id="formulaDisplay">
                        百化分公式：百分数 = (分子 ÷ 分母) × 100%
                    </div>
                    
                    <button class="convert-btn" id="convertBtn">
                        <i class="fas fa-sync-alt"></i> 开始转换
                    </button>
                </div>
                
                <div class="result-box" id="resultBox" style="display:none;">
                    <h3>转换结果：</h3>
                    <div class="result-value" id="resultValue"></div>
                    <div class="result-detail" id="resultDetail"></div>
                </div>
                
                <div class="memory-tip">
                    <div class="tip-title"><i class="fas fa-lightbulb"></i> 记忆技巧：</div>
                    <p>1. 常用百化分：1/2=50%，1/3≈33.3%，1/4=25%，1/5=20%，1/6≈16.7%，1/7≈14.3%，1/8=12.5%</p>
                    <p>2. 分数转百分数：分子÷分母×100%，然后简化或保留合适小数位</p>
                    <p>3. 百分数转分数：将百分数写成分母为100的分数，然后约分</p>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-title"><i class="fas fa-bolt"></i> 快速转换（常用分数）</h2>
                <p>点击下方常用分数快速查看转换结果：</p>
                <div class="quick-conversions" id="quickConversions">
                    <!-- 快速转换按钮将通过JavaScript动态生成 -->
                </div>
                
                <div class="important-note">
                    <div class="note-title"><i class="fas fa-exclamation-circle"></i> 考公重点提示：</div>
                    <p>1. 资料分析中，百化分常用于增长量计算：增长量=现期量÷(n+1)，减少量=现期量÷(n-1)</p>
                    <p>2. 需要熟记1/2到1/20的百化分对应值，特别是分母为2-12的分数</p>
                    <p>3. 特殊分数如1/7≈14.3%，1/9≈11.1%，1/11≈9.1%等需重点记忆</p>
                </div>
            </div>
        </div>
        
        <div>
            <div class="panel">
                <h2 class="panel-title"><i class="fas fa-cogs"></i> 百化分应用公式</h2>
                <div class="formula-display">
                    增长量计算公式：<br>
                    增长量 = 现期量 ÷ (1/n + 1) = 现期量 ÷ (n + 1) × n<br>
                    其中 n 为分母
                </div>
                
                <div class="example">
                    <div class="example-title"><i class="fas fa-book-open"></i> 真题示例：</div>
                    <div class="example-content">
                        <p><span class="highlight">例题：</span>某市2021年财政收入为1200亿元，比上年增长12.5%，则上年财政收入约为多少？</p>
                        <p><span class="highlight">解析：</span>12.5% = 1/8，则上年财政收入 = 1200 ÷ (1 + 1/8) = 1200 ÷ (9/8) = 1200 × 8/9 ≈ 1066.67亿元</p>
                        <p>使用百化分可以快速计算：增长1/8，则上年为8份，今年为9份，每份为1200÷9≈133.33，上年=133.33×8≈1066.67亿元</p>
                    </div>
                </div>
                
                <div class="memory-tip">
                    <div class="tip-title"><i class="fas fa-trophy"></i> 高分技巧：</div>
                    <p>1. 遇到百分数先尝试百化分，特别是12.5%、16.7%、14.3%等</p>
                    <p>2. 复杂计算可先化简分数，再计算</p>
                    <p>3. 比较大小可统一转换为分数或百分数后再比较</p>
                    <p>4. 多练习提高百化分敏感度和计算速度</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="section-divider"></div>
    
    <h2 class="category-title"><i class="fas fa-table"></i> 完整百化分对照表（1/2 到 1/30）</h2>
    
    <div class="tables-container">
        <div class="table-wrapper">
            <h3 class="table-title">1/2 到 1/15 百化分表</h3>
            <table>
                <thead>
                    <tr>
                        <th>分数</th>
                        <th>百分数</th>
                        <th>小数</th>
                        <th>记忆口诀</th>
                    </tr>
                </thead>
                <tbody id="table1to15">
                    <!-- 表格数据将通过JavaScript动态生成 -->
                </tbody>
            </table>
        </div>
        
        <div class="table-wrapper">
            <h3 class="table-title">1/16 到 1/30 百化分表</h3>
            <table>
                <thead>
                    <tr>
                        <th>分数</th>
                        <th>百分数</th>
                        <th>小数</th>
                        <th>记忆口诀</th>
                    </tr>
                </thead>
                <tbody id="table16to30">
                    <!-- 表格数据将通过JavaScript动态生成 -->
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="panel">
        <h2 class="panel-title"><i class="fas fa-chart-line"></i> 百化分规律总结</h2>
        <div class="example-content">
            <p><span class="highlight">规律1：</span>分母越大，百分数越小。1/n 的百分数约等于 100/n %</p>
            <p><span class="highlight">规律2：</span>常见特殊分数：1/3≈33.3%，1/6≈16.7%，1/7≈14.3%，1/9≈11.1%，1/11≈9.1%，1/12≈8.3%</p>
            <p><span class="highlight">规律3：</span>分母为2、4、5、8、10、20、25的分数可以精确转换为百分数</p>
            <p><span class="highlight">规律4：</span>分母为3、6、7、9、11、12、14、15等分数为循环小数，需记忆近似值</p>
            <p><span class="highlight">规律5：</span>资料分析中，通常只需要保留1-2位小数即可，不必追求绝对精确</p>
        </div>
    </div>
    
    <div class="footer">
        <p>公务员考试备考工具 | 百化分转换工具（完整版） © 2023 | 建议使用Chrome或Edge浏览器获得最佳体验</p>
        <p>本工具旨在帮助考生提高资料分析计算效率，请结合真题练习掌握百化分技巧</p>
    </div>

    <script>
        // 完整百化分数据（1/2 到 1/30）
        const fullFractionsData = [
            // 1/2 到 1/10
            { fraction: "1/2", percent: "50%", decimal: "0.5", memory: "一半" },
            { fraction: "1/3", percent: "33.3%", decimal: "0.333", memory: "三分之一" },
            { fraction: "1/4", percent: "25%", decimal: "0.25", memory: "四分之一" },
            { fraction: "1/5", percent: "20%", decimal: "0.2", memory: "五分之一" },
            { fraction: "1/6", percent: "16.7%", decimal: "0.167", memory: "六分之一" },
            { fraction: "1/7", percent: "14.3%", decimal: "0.143", memory: "七分之一" },
            { fraction: "1/8", percent: "12.5%", decimal: "0.125", memory: "八分之一" },
            { fraction: "1/9", percent: "11.1%", decimal: "0.111", memory: "九分之一" },
            { fraction: "1/10", percent: "10%", decimal: "0.1", memory: "十分之一" },
            { fraction: "1/11", percent: "9.1%", decimal: "0.091", memory: "十一分之一" },
            { fraction: "1/12", percent: "8.3%", decimal: "0.083", memory: "十二分之一" },
            { fraction: "1/13", percent: "7.7%", decimal: "0.077", memory: "十三分之一" },
            { fraction: "1/14", percent: "7.1%", decimal: "0.071", memory: "十四分之一" },
            { fraction: "1/15", percent: "6.7%", decimal: "0.067", memory: "十五分之一" },
            // 1/16 到 1/20
            { fraction: "1/16", percent: "6.25%", decimal: "0.0625", memory: "十六分之一" },
            { fraction: "1/17", percent: "5.9%", decimal: "0.059", memory: "十七分之一" },
            { fraction: "1/18", percent: "5.6%", decimal: "0.056", memory: "十八分之一" },
            { fraction: "1/19", percent: "5.3%", decimal: "0.053", memory: "十九分之一" },
            { fraction: "1/20", percent: "5%", decimal: "0.05", memory: "二十分之一" },
            // 1/21 到 1/25
            { fraction: "1/21", percent: "4.8%", decimal: "0.048", memory: "二十一分之一" },
            { fraction: "1/22", percent: "4.5%", decimal: "0.045", memory: "二十二分之一" },
            { fraction: "1/23", percent: "4.3%", decimal: "0.043", memory: "二十三分之一" },
            { fraction: "1/24", percent: "4.2%", decimal: "0.042", memory: "二十四分之一" },
            { fraction: "1/25", percent: "4%", decimal: "0.04", memory: "二十五分之一" },
            // 1/26 到 1/30
            { fraction: "1/26", percent: "3.8%", decimal: "0.038", memory: "二十六分之一" },
            { fraction: "1/27", percent: "3.7%", decimal: "0.037", memory: "二十七分之一" },
            { fraction: "1/28", percent: "3.6%", decimal: "0.036", memory: "二十八分之一" },
            { fraction: "1/29", percent: "3.4%", decimal: "0.034", memory: "二十九分之一" },
            { fraction: "1/30", percent: "3.3%", decimal: "0.033", memory: "三十分之一" }
        ];
        
        // 快速转换常用分数（前15个最常用的）
        const quickFractions = [
            "1/2", "1/3", "1/4", "1/5", "1/6", 
            "1/7", "1/8", "1/9", "1/10", "1/11",
            "1/12", "1/14", "1/15", "1/16", "1/20"
        ];
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化表格
            populateFractionTables();
            
            // 初始化快速转换按钮
            populateQuickConversions();
            
            // 绑定转换按钮事件
            document.getElementById('convertBtn').addEventListener('click', performConversion);
            
            // 绑定输入框回车事件
            document.getElementById('percentInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performConversion();
            });
            
            document.getElementById('fractionInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performConversion();
            });
        });
        
        // 填充百化分表格
        function populateFractionTables() {
            const table1to15 = document.getElementById('table1to15');
            const table16to30 = document.getElementById('table16to30');
            
            table1to15.innerHTML = '';
            table16to30.innerHTML = '';
            
            // 填充1/2到1/15的表格
            for (let i = 0; i < 14; i++) {
                const item = fullFractionsData[i];
                const row = document.createElement('tr');
                
                // 分数列
                const fractionCell = document.createElement('td');
                fractionCell.innerHTML = `<span class="fraction">${item.fraction}</span>`;
                row.appendChild(fractionCell);
                
                // 百分数列
                const percentCell = document.createElement('td');
                percentCell.innerHTML = `<span class="percentage">${item.percent}</span>`;
                row.appendChild(percentCell);
                
                // 小数列
                const decimalCell = document.createElement('td');
                decimalCell.textContent = item.decimal;
                row.appendChild(decimalCell);
                
                // 记忆口诀列
                const memoryCell = document.createElement('td');
                memoryCell.textContent = item.memory;
                row.appendChild(memoryCell);
                
                table1to15.appendChild(row);
            }
            
            // 填充1/16到1/30的表格
            for (let i = 14; i < fullFractionsData.length; i++) {
                const item = fullFractionsData[i];
                const row = document.createElement('tr');
                
                // 分数列
                const fractionCell = document.createElement('td');
                fractionCell.innerHTML = `<span class="fraction">${item.fraction}</span>`;
                row.appendChild(fractionCell);
                
                // 百分数列
                const percentCell = document.createElement('td');
                percentCell.innerHTML = `<span class="percentage">${item.percent}</span>`;
                row.appendChild(percentCell);
                
                // 小数列
                const decimalCell = document.createElement('td');
                decimalCell.textContent = item.decimal;
                row.appendChild(decimalCell);
                
                // 记忆口诀列
                const memoryCell = document.createElement('td');
                memoryCell.textContent = item.memory;
                row.appendChild(memoryCell);
                
                table16to30.appendChild(row);
            }
        }
        
        // 填充快速转换按钮
        function populateQuickConversions() {
            const quickContainer = document.getElementById('quickConversions');
            quickContainer.innerHTML = '';
            
            quickFractions.forEach(fraction => {
                // 在完整数据中查找对应的百分数
                const item = fullFractionsData.find(item => item.fraction === fraction);
                if (!item) return;
                
                const quickItem = document.createElement('div');
                quickItem.className = 'quick-item';
                quickItem.innerHTML = `
                    <div class="quick-fraction">${fraction}</div>
                    <div class="quick-percent">${item.percent}</div>
                `;
                
                // 点击快速转换
                quickItem.addEventListener('click', function() {
                    document.getElementById('fractionInput').value = fraction;
                    document.getElementById('percentInput').value = '';
                    performConversion();
                });
                
                quickContainer.appendChild(quickItem);
            });
        }
        
        // 分数转百分数
        function fractionToPercent(fraction) {
            // 先在完整数据中查找
            const item = fullFractionsData.find(item => item.fraction === fraction);
            if (item) return item.percent;
            
            // 如果不是预定义的分数，进行计算
            const parts = fraction.split('/');
            if (parts.length !== 2) return '格式错误';
            
            const numerator = parseFloat(parts[0]);
            const denominator = parseFloat(parts[1]);
            
            if (denominator === 0) return '分母不能为0';
            
            const percentValue = (numerator / denominator) * 100;
            
            // 保留适当的小数位数
            if (percentValue === Math.floor(percentValue)) {
                return percentValue + '%';
            } else if (percentValue * 10 === Math.floor(percentValue * 10)) {
                return percentValue.toFixed(1) + '%';
            } else {
                return percentValue.toFixed(2) + '%';
            }
        }
        
        // 百分数转分数
        function percentToFraction(percentStr) {
            // 移除百分号并转换为数字
            const percentValue = parseFloat(percentStr.replace('%', '').trim());
            
            if (isNaN(percentValue)) return null;
            
            // 查找完整数据中的匹配项
            for (const item of fullFractionsData) {
                const itemPercent = parseFloat(item.percent.replace('%', ''));
                // 允许一定误差范围（0.1%）
                if (Math.abs(itemPercent - percentValue) < 0.1) {
                    return item.fraction;
                }
            }
            
            // 如果不是常见百化分，计算近似分数
            const decimalValue = percentValue / 100;
            
            // 尝试找到最接近的分数（分母在2-30之间）
            let bestFraction = "1/2";
            let bestError = Math.abs(decimalValue - 0.5);
            
            for (let denominator = 2; denominator <= 30; denominator++) {
                for (let numerator = 1; numerator < denominator; numerator++) {
                    // 只考虑最简分数
                    if (gcd(numerator, denominator) !== 1) continue;
                    
                    const fractionValue = numerator / denominator;
                    const error = Math.abs(fractionValue - decimalValue);
                    
                    if (error < bestError) {
                        bestError = error;
                        bestFraction = `${numerator}/${denominator}`;
                    }
                }
            }
            
            // 如果误差太大，返回计算值
            if (bestError > 0.01) {
                return `约 ${bestFraction}`;
            }
            
            return bestFraction;
        }
        
        // 计算最大公约数
        function gcd(a, b) {
            return b ? gcd(b, a % b) : a;
        }
        
        // 执行转换
        function performConversion() {
            const percentInput = document.getElementById('percentInput').value.trim();
            const fractionInput = document.getElementById('fractionInput').value.trim();
            
            let resultHtml = '';
            let detailHtml = '';
            let resultValue = '';
            
            // 显示结果框
            const resultBox = document.getElementById('resultBox');
            resultBox.style.display = 'block';
            
            // 如果输入了百分数
            if (percentInput) {
                const fraction = percentToFraction(percentInput);
                
                if (fraction) {
                    resultValue = `${percentInput} = ${fraction}`;
                    detailHtml = `百化分结果：${percentInput} 可以近似转换为 ${fraction}`;
                    
                    // 显示应用公式
                    const percentValue = parseFloat(percentInput.replace('%', '').trim());
                    if (!isNaN(percentValue)) {
                        const decimalValue = percentValue / 100;
                        const parts = fraction.split('/');
                        if (parts.length === 2 && !fraction.startsWith('约')) {
                            const numerator = parseFloat(parts[0]);
                            const denominator = parseFloat(parts[1]);
                            
                            // 更新公式显示
                            document.getElementById('formulaDisplay').innerHTML = 
                                `百化分公式：${percentInput} = ${numerator} ÷ ${denominator} = ${decimalValue.toFixed(4)}`;
                            
                            // 增长量计算提示
                            if (percentValue > 0 && percentValue < 100) {
                                detailHtml += `<br>增长量计算：现期量 ÷ (${denominator} + 1)`;
                            }
                        }
                    }
                } else {
                    resultValue = '无法转换，请输入有效百分数';
                    detailHtml = '请输入如 12.5%、33.3% 等常见百分数，或使用分数输入';
                }
            }
            // 如果输入了分数
            else if (fractionInput) {
                const percent = fractionToPercent(fractionInput);
                
                if (percent && !percent.includes('错误')) {
                    resultValue = `${fractionInput} = ${percent}`;
                    detailHtml = `分数转换结果：${fractionInput} 转换为百分数是 ${percent}`;
                    
                    // 显示应用公式
                    const parts = fractionInput.split('/');
                    if (parts.length === 2) {
                        const numerator = parseFloat(parts[0]);
                        const denominator = parseFloat(parts[1]);
                        
                        if (!isNaN(numerator) && !isNaN(denominator) && denominator !== 0) {
                            const decimalValue = numerator / denominator;
                            const percentValue = decimalValue * 100;
                            
                            // 更新公式显示
                            document.getElementById('formulaDisplay').innerHTML = 
                                `百化分公式：${fractionInput} = ${numerator} ÷ ${denominator} = ${decimalValue.toFixed(4)} = ${percent}`;
                            
                            // 增长量计算提示
                            if (decimalValue > 0 && decimalValue < 1) {
                                detailHtml += `<br>增长量计算：现期量 ÷ (${denominator} + 1)`;
                            }
                        }
                    }
                } else {
                    resultValue = '无法转换，请输入有效分数';
                    detailHtml = '请输入如 1/8、3/5 等格式的分数，支持1/2到1/30';
                }
            }
            // 如果都没有输入
            else {
                resultValue = '请输入百分数或分数';
                detailHtml = '请在左侧输入百分数（如12.5%）或分数（如1/8）';
            }
            
            // 更新结果
            document.getElementById('resultValue').innerHTML = resultValue;
            document.getElementById('resultDetail').innerHTML = detailHtml;
            
            // 滚动到结果位置
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // 初始示例转换
        setTimeout(() => {
            document.getElementById('percentInput').value = '12.5%';
            performConversion();
        }, 500);
    </script>
</body>
</html>
